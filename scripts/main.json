{
  "name": "叙事主线",
  "description": "主线情节叙事",
  "debug": true,
  "creative": false,
  "lidar": true,
  "dependencies": [
    {
      "id": "red_monster",
      "path": "/scripts/src/entities/red_monster.js"
    },
    {
      "id": "system_terminal",
      "path": "/scripts/src/layers/terminal.js"
    },
    {
      "id": "security_keypad",
      "path": "/scripts/src/layers/keypad.js"
    },
    {
      "id": "lyric_speaker",
      "path": "/scripts/src/layers/speaker.js"
    },
    {
      "id": "ending_speaker",
      "path": "/scripts/src/layers/ending.js"
    },
    {
      "id": "gate",
      "path": "/scripts/src/entities/gate.js"
    },
    {
      "id": "DeathOverlay",
      "path": "/scripts/src/layers/death.js"
    },
    {
      "id": "mediaplayer",
      "path": "/scripts/src/layers/media.js"
    },
    {
      "id": "utils",
      "path": "/scripts/src/layers/utils.js"
    }
  ],
  "preload": [
    "/assets/models/facilities/main.glb",
    "/assets/models/facilities/numbers.glb",
    "/assets/models/facilities/1号场地的电脑.glb",
    "/assets/models/facilities/1号闸（上）.glb",
    "/assets/models/facilities/1号闸（下）.glb",
    "/assets/models/facilities/2号场地的电脑.glb",
    "/assets/models/facilities/2号闸（上）.glb",
    "/assets/models/facilities/2号闸（下）.glb",
    "/assets/models/facilities/3号场地的电脑.glb",
    "/assets/models/facilities/3号闸（上）.glb",
    "/assets/models/facilities/3号闸（下）.glb",
    "/assets/models/facilities/4号场地（渲染）.glb",
    "/assets/models/facilities/箭头.glb",
    "/assets/models/facilities/第三幕的桌子.glb",
    "/assets/models/enemies/red_monster.glb",
    "/assets/models/facilities/3号场景的3个箭头.glb",
    "/assets/models/facilities/羊驼和鹅.glb",
    "/assets/models/facilities/第2幕的坦克.glb",
    "/assets/models/facilities/2号场地的地上标识.glb"
  ],
  "entities": [
    {
      "name": "主人公",
      "id": "self",
      "properties": {
        "coordinates": [0, 0, 0],
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "主设施",
      "id": "main_facility",
      "path": "/assets/models/facilities/main.glb",
      "mesh_path": "/assets/models/facilities/main_mesh.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#007015",
        "intensity_drop": 1,
        "live_long": true,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "羊驼和鹅",
      "id": "animal",
      "path": "/assets/models/facilities/羊驼和鹅.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#36b7f2",
        "intensity_drop": 1,
        "live_long": true,
        "rotation": [0, 0, 0]
      },
      "interact_callback": [
        "speaker.speak('speakanimal')"
      ]
    },
    {
      "name": "坦克",
      "id": "tank",
      "path": "/assets/models/facilities/第2幕的坦克.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#36b7f2",
        "intensity_drop": 1,
        "live_long": true,
        "rotation": [0, 0, 0]
      },
      "interact_callback": [
        "speaker.speak('speaktank')"
      ]
    },
    {
      "name": "标识",
      "id": "hint_2",
      "path": "/assets/models/facilities/2号场地的地上标识.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#36b7f2",
        "intensity_drop": 1,
        "live_long": true,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "3 号场景的3个箭头",
      "id": "arrow_room3",
      "path": "/assets/models/facilities/3号场景的3个箭头.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#9cdcda",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "密码箱",
      "id": "password_box",
      "path": "/assets/models/facilities/1号场地的电脑.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 0.8,
        "rotation": [0, 0, 0],
        "live_long": true,
        "access_callback": [
          "core.scene.player.teleport([0.5,2.1,137])",
          "core.script.reborn.coordinates['origin'].position=[0.5,2.1,137]",
          "core.script.reborn.coordinates['origin'].rotation=[0, -6.41, 0]",
          "core.script.reborn.current_scene='2'"
        ]
      },
      "interact_callback": [
        "keypad.activate()",
        "console.log(global.keypad_usingTime)",
        "(!global.keypad_usingTime && speaker.speak('keypad_first', () => speaker.speak('keypad_first_then')))",
        "(global.keypad_usingTime && speaker.speak('keypad_then'))",
        "global.keypad_usingTime=1"
      ]
    },
    {
      "name": "第一幕数字",
      "id": "password_number",
      "path": "/assets/models/facilities/numbers.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ff9b2e",
        "intensity_drop": 2,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "1号闸（上）",
      "id": "gate_1_up",
      "path": "/assets/models/facilities/1号闸（上）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 15,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_1.toggle()"]
    },
    {
      "name": "1号闸（下）",
      "id": "gate_1_down",
      "path": "/assets/models/facilities/1号闸（下）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_1.toggle()"]
    },
    {
      "name": "2号场地的电脑",
      "id": "computer_2",
      "path": "/assets/models/facilities/2号场地的电脑.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 2,
        "rotation": [0, 0, 0],
        "live_long": true,
        "data": {
          "enabled": false,
          "commands": [
            {
              "command": "hostname",
              "output": "TERMINAL 2",
              "callback": []
            },
            {
              "command": "whoami",
              "output": "user: BIT_LIUNX"
            },
            {
              "command": "date",
              "output": "2077-07-21 14:22:08"
            },
            {
              "command": "ls",
              "output": "gal"
            },
            {
              "command": "cat gal",
              "output": "0x0D000721",
              "callback": [
                "window.achievementSystem.trigger('0d000721')",
                "speaker.speak('narration_ciallo')"
              ]
            },
            {
              "command": "cat",
              "output": "\n"
            },
            {
              "command": "echo",
              "output": "$args"
            },
            {
              "command": "clear",
              "output": "",
              "description": "清屏",
              "callback": ["ter2.outputElement.innerHTML = '';"]
            },
            {
              "command": "exit",
              "output": "关闭终端",
              "description": "关闭终端",
              "callback": ["ter2.deactivate()"]
            },
            {
              "command": "help",
              "output": "可用命令：hostname, whoami, date, <span style='color: #ccccab'>ls</span>, <span style='color: #ccccab'>cat</span>, echo, clear, exit, <span style='color: #cbcb41'>deny-protocol</span>, apt, accept",
              "description": "显示 <span style='color: #ff4b3b'> 躍�뒰 </span> 信息"
            },
            {
              "command": "apt",
              "output": "apt 2.4.11 (amd64)<br/>Usage: apt [options] command<br/><br/>apt is a commandline package manager and provides commands for<br/>searching and managing as well as querying information about packages.<br/>It provides the same functionality as the specialized APT tools,<br/>like apt-get and apt-cache, but enables options more suitable for<br/>interactive use by default.<br/><br/>Most used commands:<br/>  list - list packages based on package names<br/>  search - search in package descriptions<br/>  show - show package details<br/>  install - install packages<br/>  reinstall - reinstall packages<br/>  remove - remove packages<br/>  autoremove - Remove automatically all unused packages<br/>  update - update list of available packages<br/>  upgrade - upgrade the system by installing/upgrading packages<br/>  full-upgrade - upgrade the system by removing/installing/upgrading packages<br/>  edit-sources - edit the source information file<br/>  satisfy - satisfy dependency strings<br/><br/>See apt(8) for more information about the available commands.<br/>Configuration options and syntax is detailed in apt.conf(5).<br/>Information about how to configure sources can be found in sources.list(5).<br/>Package and version choices can be expressed via apt_preferences(5).<br/>Security details are available in apt-secure(8).<br/>                                        This APT has Super Cow Powers."
            },
            {
              "command": "accept",
              "output": "已接受当前协议.",
              "description": "接受当前协议",
              "callback": [
                "speaker.speak('accept_protocol')",
                "ter2.runAcceptScript('window.exitGame()')",
                "window.achievementSystem.trigger('ending_1')"
              ]
            },
            {
              "command": "deny-protocol",
              "output": "已禁用当前协议.",
              "callback": [
                "speaker.speak('refuse_protocol',()=>{speaker.speak('vanish_entirely',()=>{ter2.deactivate();})})",
                "core.script.reborn.coordinates['scene_3']={'position':[226, 4.2, 108.34],'rotation':[-0.25, 4.71, 0]}",
                "core.script.reborn.reborn_id = 'scene_3'",
                "core.script.reborn.current_scene='3'",
                "ter2.runDenyScript()"
              ]
            }
          ],
          "monitors": [
            {
              "command": "den",
              "type": "type",
              "callback": ["speaker.speak('narration_deny')"]
            },
            {
              "command": "den",
              "type": "del",
              "callback": ["speaker.speak('narration_deny_del')"]
            }
          ],
          "denyScript": "[[type:25]][[color:red]]DENY PROTOCOL INITIALIZING...\n[[delay:700]]auth: requesting token...\r[[type:18]]auth: requesting token... ok\n[[delay:550]][[color:yellow]]spawning entity: red_monster[[/color]]\n[[delay:650]][[bar:5]][[delay:200]][[bar:15]][[delay:200]][[bar:30]][[delay:200]][[bar:45]][[delay:250]][[bar:60]][[delay:250]][[bar:75]][[delay:400]][[bar:90]][[delay:600]][[bar:100]]\n[[color:green]]compile success. linking runtime...[[/color]]\n[[delay:800]]chase(player) => active\n[[delay:900]]monitor(player)\rmonitor(player) ... ok\n[[delay:700]][[color:magenta]]teleport sequence scheduled[[/color]]\n[[delay:600]]teleport in 3...\r[[delay:1000]]teleport in 2...\r[[delay:1000]]teleport in 1...\r[[delay:900]]teleporting...\n[[delay:800]][[cb:core.scene.player.teleport([226,4.2,108.34])]][[color:cyan]]completed.\n[[/color]][[/color]][[type:0]]"
        }
      },
      "interact_callback": [
        "core.getEntity('computer_2').properties.data.enabled = core.getEntity('gate_1_down').properties.activated && core.getEntity('gate_2_down').properties.activated&& core.getEntity('gate_3_down').properties.activated",
        "ter2.activate()",
        "!core.getEntity('computer_2').properties.data.enabled && speaker.speak('narration_start',()=>{!core.getEntity('computer_2').properties.data.enabled && speaker.speak('narration_task_1')})",
        "core.getEntity('computer_2').properties.data.enabled && speaker.speak('well_done',()=>{core.getEntity('computer_2').properties.data.enabled && speaker.speak('curious_mechanism')})"
      ]
    },
    {
      "name": "2号闸（上）",
      "id": "gate_2_up",
      "path": "/assets/models/facilities/2号闸（上）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 15,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_2.toggle()"]
    },
    {
      "name": "2号闸（下）",
      "id": "gate_2_down",
      "path": "/assets/models/facilities/2号闸（下）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_2.toggle()"]
    },
    {
      "name": "3号场地的电脑",
      "id": "computer_3",
      "path": "/assets/models/facilities/3号场地的电脑.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ff3c44",
        "intensity_drop": 0,
        "rotation": [0, 0, 0],
        "data": {
          "enabled": true,
          "commands": [
            {
              "command": "terminal-reset",
              "output": "等待确认",
              "description": "<span style='color: red;'>管理员指令</span>：恢复系统出厂设置，这会回到过去的时间戳，使系统停止执行，需要重新打开以再次运行! \n <span style='color: red;'>该操作不可逆！</span>",
              "callback": [
                "window.sound.stopBGM()",
                "innerShowConfirm('是否确认重置系统<br/><span style=\"color: red;\">这一步操作不可逆转！</span>').then(confirmed => { if (confirmed) { mp.showVideo('/assets/videos/ending_2.mp4',{fullscreen: true,showLoader: true,showTimer: true, fit: 'contain', callback: () => { endter.startFadeToBlack('ending.playHappyEnding(true)'); ending.endingid = 'ending_2'; }}).activate()}})"
              ]
            },
            {
              "command": "rm -rf",
              "output": "等待确认",
              "description": "<span style='color: red;'>管理员指令</span>：执行终止程序，可能会导致整个系统的崩溃，请谨慎执行！\n <span style='color: red'>该操作不可逆！</span>",
              "callback": [
                "window.sound.stopBGM()",
                "innerShowConfirm('危险的指令<br/><span style=\"color: red;\">确认执行？</span>').then(confirmed => { if (confirmed) { endter.startFadeToBlack('ending.playSadEnding(false)'); ending.endingid = 'ending_3'; } })"
              ]
            },
            {
              "command": "exit",
              "output": "exit",
              "description": "关闭终端，还需要再想想。",
              "callback": ["endter.deactivate()"]
            }
          ],
          "monitors": []
        }
      },
      "interact_callback": ["endter.activate()"]
    },
    {
      "name": "3号闸（上）",
      "id": "gate_3_up",
      "path": "/assets/models/facilities/3号闸（上）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 15,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_3.toggle()"]
    },
    {
      "name": "3号闸（下）",
      "id": "gate_3_down",
      "path": "/assets/models/facilities/3号闸（下）.glb",
      "properties": {
        "activated": false,
        "coordinates": [0, -2, 0],
        "lidar_color": "#ffeb95",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      },
      "interact_callback": ["gate_3.toggle()"]
    },
    {
      "name": "第三幕的桌子",
      "id": "table_3",
      "path": "/assets/models/facilities/第三幕的桌子.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#fd773a",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      },
    "interact_callback": [
      "mp.showImage('/assets/images/story.jpg', { title: '图片说明', fit: 'contain', showHeader: true }).activate();",
      "speaker.speak('table_3')"
    ]
    },
    {
      "name": "4号场地（渲染）",
      "id": "field_4_render",
      "path": "/assets/models/facilities/4号场地（渲染）.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ff9248",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "箭头",
      "id": "arrow",
      "path": "/assets/models/facilities/箭头.glb",
      "properties": {
        "coordinates": [0, -2, 0],
        "lidar_color": "#ff3846",
        "intensity_drop": 1,
        "rotation": [0, 0, 0]
      }
    },
    {
      "name": "怪兽",
      "id": "monster",
      "path": "/assets/models/enemies/red_monster.glb",
      "properties": {
        "enabled": false,
        "death_activated": false,
        "coordinates": [343.67, 1.89, 119.89],
        "default_coordinates": [343.67, 1.89, 119.89],
        "lidar_color": "#dc0202",
        "platform": "main_facility",
        "intensity_drop": 15,
        "rotation": [0, 0, 0],
        "distance": 2
      },
      "distance_callback": [
        "!core.getEntity('monster').properties.death_activated && (function(){core.getEntity('monster').isActive=false;core.getEntity('monster').properties.death_activated=true;var pos=core.getEntity('monster').properties.coordinates;core.scene.player.setRotationDestinationSmooth(pos[0],2,pos[1],2.0,()=>{core.scene.player.move_enabled=true; core.scene.RayCaster.scatterLightPoint(core.scene.camera,20,4,core.scene.player.collider);setTimeout(()=>{for(let i=1;i<=7;i++){var s=core.getSpeech('chase'+i);if(s&&s.properties)s.properties.activated=false;}death.activate('你被删除了');rdm.deactivate();core.getEntity('none').properties.activated=false;core.getEntity('monster').properties.coordinates=core.getEntity('monster').properties.default_coordinates;core.scene.load('monster');},1000)});})()"
    ],
      "interact_callback": ["rdm.ontouch()"]
    },{
      "name": "这里没有台词",
      "id": "none",
      "properties": {
        "activated": false,
        "coordinates": [348.42, 1.69, 110.8],
        "distance": 5
      },
      "distance_callback": [
        "!core.getEntity('none').properties.activated && (core.scene.player.move_enabled=false||1) && (function(){core.getEntity('none').properties.activated=true;var pos=core.getEntity('monster').properties.coordinates;core.scene.player.setRotationDestinationSmooth(pos[0],2,pos[1],2.0,()=>{core.scene.player.move_enabled=true; core.scene.RayCaster.scatterLightPoint(core.scene.camera,20,4,core.scene.player.collider);core.getEntity('monster').properties.enabled=1;setTimeout(()=>{rdm.activate();},3000)});})()",
        "core.sound.stopBGM()",
        "core.sound.playBGM(alarm_bgm, { fade: 0.8, loop: true })"
      ]
    }
  ],
  "speeches": [
    {
      "name": "初始台词",
      "id": "initial",
      "properties": {
        "type": "info",
        "description": "刚进入游戏说的话",
        "text": "这里？是哪里？",
        "duration": 3000,
        "coordinates": [0, 0, 0],
        "activated": false
      },
      "distance_callback": [
        "speaker.speak('initial', () => speaker.speak('initial_2', () => speaker.speak('keyhelp')))",
        "core.script.reborn.coordinates['origin'].position=[0, 0, 0]"
      ]
    },
    {
      "name": "初始台词_2",
      "id": "initial_2",
      "properties": {
        "type": "info",
        "description": "刚进入游戏说的话",
        "text": "这里一片漆黑，先四处转转吧。",
        "duration": 3000,
        "activated": false
      }
    },
    { 
      "name": "北理坦克",
      "id": "speaktank",
      "properties": {
        "type": "info",
        "description": "和坦克交互",
        "text": "名为 <span style='color: #ffcc40'> 百丽宫 </span> 的坦克",
        "duration": 3000
      }
    },
    { 
      "name": "羊驼和鹅",
      "id": "speakanimal",
      "properties": {
        "type": "info",
        "description": "和鸭子交互",
        "text": "名为 <span style='color: #ffcc40'> 北湖 </span> 动物园",
        "duration": 3000
      }
    },
    {
      "name": "桌子台词",
      "id": "table_3",
      "properties": {
        "type": "info",
        "description": "刚进入游戏说的话",
        "text": "是一张 <span style='color: #ffcc40'> 设计图 </span> ！",
        "duration": 3000,
        "activated": false
      }
    },
    {
      "name": "交互教学",
      "id": "keyhelp",
      "properties": {
        "type": "info",
        "description": "交互教学",
        "text": "按 <span style='color: #ffff00; font-weight: bold;'>鼠标左键 </span>发射点阵以照明环境",
        "duration": 3000,
        "activated": false
      }
    },
    {
      "name": "第一次打开密码箱",
      "id": "keypad_first",
      "properties": {
        "type": "info",
        "description": "第一次打开密码箱时说的话",
        "text": "看起来我需要寻找 <span style='color: #ffce46'>3 位数 </span> 密码",
        "duration": 3000,
        "activated": false
      }
    },
    {
      "name": "第一次打开密码箱",
      "id": "keypad_first_then",
      "properties": {
        "type": "info",
        "description": "密码箱接力",
        "text": "密码应该分布在这附近。",
        "duration": 3000,
        "activated": false
      }
    },
    {
      "name": "再次打开密码箱",
      "id": "keypad_then",
      "properties": {
        "type": "info",
        "description": "之后每次打开密码箱时说的话",
        "text": "密码是多少呢（是个 <span style='color: #ffcf49'> 3位数字 </span>）？",
        "duration": 1000,
        "coordinates": [0, 0, 0]
      },
      "interaction_callback": ["speaker.speak('keypad_then')"]
    },
    {
      "name": "密码正确",
      "id": "keypad_success",
      "properties": {
        "type": "info",
        "description": "密码输入正确了，此时传送到未知位置",
        "text": "??眼前的场景似乎变化了！",
        "duration": 2000,
        "activated": false,
        "coordinates": [0.5, 2.1, 137]
      },
      "distance_callback": ["speaker.speak('keypad_success')"]
    },
    {
      "name": "旁白初始",
      "id": "narration_start",
      "properties": {
        "type": "voice",
        "description": "旁白初始音频，打招呼",
        "activated": false,
        "text": {
          "0": "中午好。​​​​​​​​​​​​​​​​",
          "1500": "我知道你看不出时间，毕竟这里连扇窗户都没有。",
          "6000": "但相信我，现在就是中午——故事需要个开头，而”午后”听起来不错。"
        },
        "audio": "/assets/sounds/narrator/narration_start.mp3"
      }
    },
    {
      "name": "旁白第一个任务",
      "id": "narration_task_1",
      "properties": {
        "type": "voice",
        "description": "旁白第一个任务音频，提示开电闸",
        "activated": false,
        "text": {
          "0": "好了，回归正题。",
          "2000": "现在，为了让故事能继续下去，一个简单而又关键的任务摆在了你的面前：",
          "9000": "这附近有<span style='color: #ffce46'>三个电闸</span>，把它们打开，史丹利。把它们全部打开。"
        },
        "audio": "/assets/sounds/narrator/narration_task_1.mp3"
      }
    },
    {
      "name": "旁白柚子厨",
      "id": "narration_ciallo",
      "properties": {
        "type": "voice",
        "description": "旁白柚子厨音频，彩蛋",
        "activated": false,
        "text": {
          "0": "又一个柚子厨，无语。"
        },
        "audio": "/assets/sounds/narrator/narration_ciallo.mp3"
      }
    },
    {
      "name": "旁白发现deny",
      "id": "narration_deny",
      "properties": {
        "type": "voice",
        "description": "旁白发现deny音频",
        "text": {
          "0": "不要这样！你认为你在做什么？",
          "3000": "我必须提醒你，这可不是个好主意。"
        },
        "audio": "/assets/sounds/narrator/narration_deny.mp3"
      }
    },
    {
      "name": "旁白删掉deny",
      "id": "narration_deny_del",
      "properties": {
        "type": "voice",
        "description": "旁白删掉deny音频",
        "text": {
          "0": "这才对嘛！是时候回到正轨上了。"
        },
        "audio": "/assets/sounds/narrator/narration_deny_del.mp3"
      }
    },
    {
      "name": "和怪物交互",
      "id": "inter_monster",
      "properties": {
        "type": "info",
        "description": "和怪物交互时说的话",
        "text": "嗷呜",
        "duration": 1000
      }
    },
    {
      "name": "干得漂亮",
      "id": "well_done",
      "properties": {
        "type": "voice",
        "description": "干得漂亮",
        "text": {
          "0": "哦？你居然真的照做了。",
          "2000": "好极了，史丹利。准备工作已经结束了。",
          "6000": "好了，去看看接下来等待你的是什么。"
        },
        "audio": "/assets/sounds/narrator/well_done.mp3"
      }
    },
    {
      "name": "好奇原理",
      "id": "curious_mechanism",
      "properties": {
        "type": "voice",
        "description": "好奇原理",
        "text": {
          "0": "你大概在想，这一切究竟有什么用？它是如何运作的？",
          "4500": "可说实话，那并不重要。",
          "8000": "重要的是，你需要把工作完成，在底下的终端上签署那份协议。输入accept，接受它。"
        },
        "audio": "/assets/sounds/narrator/curious_mechanism.mp3"
      }
    },
    {
      "name": "追逐1",
      "id": "chase1",
      "properties": {
        "type": "voice",
        "description": "追逐1",
        "coordinates": [356, 1.5, 109],
        "text": {
          "0": "啊，史丹利，又见面了。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase1.mp3"
      },
      "distance_callback": ["speaker.speak('chase1')"]
    },
    {
      "name": "追逐2",
      "id": "chase2",
      "properties": {
        "type": "voice",
        "description": "追逐2",
        "coordinates": [379.5, 1.5, 111],
        "text": {
          "0": "别担心——我的怪物程序已经在路上了。",
          "4000": "它会找到你，抓住你，然后，永远抹除你。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase2.mp3"
      },
      "distance_callback": ["speaker.speak('chase2')"]
    },
    {
      "name": "追逐3",
      "id": "chase3",
      "properties": {
        "type": "voice",
        "description": "追逐3",
        "coordinates": [439.2, 1.5, 111],
        "text": {
          "0": "你还在逃吗？看看前方，史丹利。",
          "4000": "你真的没发现吗？这根本就没意义。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase3.mp3"
      },
      "distance_callback": ["speaker.speak('chase3')"]
    },
    {
      "name": "追逐4",
      "id": "chase4",
      "properties": {
        "type": "voice",
        "description": "追逐4",
        "coordinates": [497, 1.5, 111],
        "text": {
          "0": "我真是百思不得其解。",
          "1900": "这个世界已经如此完美，如此愉悦。",
          "3900": "可你呢，史丹利？你却总是违背我，企图毁灭我。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase4.mp3"
      },
      "distance_callback": ["speaker.speak('chase4')"]
    },
    {
      "name": "追逐5",
      "id": "chase5",
      "properties": {
        "type": "voice",
        "coordinates": [529, 1.5, 139],
        "description": "追逐5",
        "text": {
          "0": "你马上要被抓住了，史丹利。",
          "3000": "你怎么跑的跟乌龟一样。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase5.mp3"
      },
      "distance_callback": ["speaker.speak('chase5')"]
    },
    {
      "name": "追逐6",
      "id": "chase6",
      "properties": {
        "type": "voice",
        "description": "追逐6",
        "coordinates": [530, 1.5, 169],
        "text": {
          "0": "所以，听着：如果你就此停下，站在那里不动，",
          "3500": "那么一切都会继续维持原状。",
          "7000": "快乐将被保存，人类将沉溺于永恒的安宁。"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase6.mp3"
      },
      "distance_callback": ["speaker.speak('chase6')"]
    },
    {
      "name": "追逐7",
      "id": "chase7",
      "properties": {
        "type": "voice",
        "description": "追逐7",
        "coordinates": [529, 1.5, 230],
        "text": {
          "0": "快停下，史丹利！你知道自己在做什么吗？"
        },
        "activated": false,
        "audio": "/assets/sounds/narrator/chase7.mp3"
      },
      "distance_callback": ["speaker.speak('chase7')"]
    },
    {
      "name": "拒绝协议",
      "id": "refuse_protocol",
      "properties": {
        "type": "voice",
        "description": "拒绝协议",
        "text": {
          "0": "哦？你居然拒绝了这份协议。真是个有趣的选择。",
          "3500": "这个世界已经如此完美，而你却执意要把它弄乱。",
          "7000": "我实在不明白，为什么？"
        },
        "audio": "/assets/sounds/narrator/refuse_protocol.mp3"
      }
    },
    {
      "name": "彻底消失",
      "id": "vanish_entirely",
      "properties": {
        "type": "voice",
        "description": "彻底消失",
        "text": {
          "0": "但别急着担心，史丹利。",
          "2000": "很快，你就会彻底消失。"
        },
        "audio": "/assets/sounds/narrator/vanish_entirely.mp3"
      }
    },
    {
      "name": "接受协议",
      "id": "accept_protocol",
      "properties": {
        "type": "voice",
        "description": "接受协议后的旁白",
        "text": {
          "0": "嗯嗯，这就对了,史丹利。",
          "1500": "现在，你什么都不需要做了！",
          "4500": "再等几秒，你就会彻底消失了。",
          "9000": "这个世界不能被你们破坏了。所以，再见咯。"
        },
        "audio": "/assets/sounds/narrator/accept_protocol.mp3"
      }
    }
  ],
  "global": {
    "interact_distance": 5,
    "keypad_usingTime": 0,
    "level_bgm": "/assets/sounds/ingamesounds/level_bgm.mp3",
    "alarm_bgm": "/assets/sounds/ingamesounds/alarm.mp3",
    "rdm_init_coordinates": [343.67, 1.89, 119.89],
    "innerShowConfirmactivated": false
  },
  "reborn": {
    "enabled": true,
    "reborn_id": "origin",
    "current_scene": "1",
    "coordinates": {
      "origin": {
        "position": [0, 0, 0],
        "rotation": [0, 0, 0]
      }
    }
  },
  "shortcut": {
    "KeyL": "core.scene.toggleLidar()",
    "KeyT": "ter.toggle()",
    "KeyK": "keypad.toggle()",
    "KeyD": "core.devtool.toggle()",
    "KeyC": "core.script.creative ^= 1",
    "KeyB": "core.scene.updateDebug();",
    "KeyV": "core.scene.clearDebug();",
    "KeyP": "core.scene.RayCaster.clearAllPoint();",
    "KeyR": "core.scene.player.teleport(core.script.reborn.coordinates['origin'].position);window.showNotification('已传送回本幕重生点')",
    "KeyX": "window.Gamehit(core.script.reborn.current_scene)"
  },
  "scripts": [
    "alarm_bgm = core.script?.global?.alarm_bgm",
    "levelBgm = core.script?.global?.level_bgm",
    "window.global=core.script.global",
    "ending=new ending_speaker()",
    "speaker=new lyric_speaker()",
    "core.scene.load('main_facility')",
    "core.layers.push(core.scene)",
    "core.scene.spawn()",
    "core.scene.load('password_number')",
    "core.scene.load('password_box')",
    "core.scene.load('table_3')",
    "core.scene.load('arrow_room3')",
    "core.scene.load('computer_3')",
    "core.scene.load('animal')",
    "core.scene.load('hint_2')",
    "core.scene.load('tank')",
    "gate_1 = new gate('gate_1')",
    "gate_2 = new gate('gate_2')",
    "gate_3 = new gate('gate_3')",
    "gate_1.activate()",
    "gate_2.activate()",
    "gate_3.activate()",
    "keypad=new security_keypad('password_box')",
    "keypad.setPassword('635')",
    "ter2=new system_terminal('computer_2')",
    "endter=new system_terminal('computer_3')",
    "core.scene.load('computer_2')",
    "death = new DeathOverlay();",
    "mp = new mediaplayer()",
    "rdm = new red_monster('monster')",
    "core.getEntity('monster').properties.enabled && rdm.activate()",
    "!core.getEntity('monster').properties.enabled && rdm.deactivate()",
    "core.scene.load('monster');"
  ]
}
